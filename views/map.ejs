<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Info Zika y Dengue</title>
  <!-- jQuery CDN -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <link rel="stylesheet" type="text/css" href="./css/style.css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
</head>
<body>

  <!-- main Row -->
  <div class="row">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 bar"></div>
        
        <div class="col-sm-12 text-center header">
          <div>
          </div>
          <h1>CASOS DE DENGUE Y ZIKA EN LA REPUBLICA ARGENTINA</h1>
          <p><h4>Datos obtenidos del Ministerio de Salud y Desarrollo Social. Secretaría de Promoción de la Salud, Prevención y Control de Riesgos. Subsecretaría de Prevención y Control de Enfermedades Comunicables e Inmunoprevenibles. Dirección Nacional de Epidemiología y Análisis de la Situación de Salud. Área de Vigilancia.</h4></p>
          <hr>
          <div>
            <img src="./img/cruz.png" alt="cruz" class="cruz">
          </div>
        </div>

        <div class="col-sm-12 bar">
          <nav class="navbar navbar-inverse">
            <div class="container-fluid">
              <!-- Brand and toggle get grouped for better mobile display -->
              <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href=""></a>
              </div>
          
              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                  <% navigation.map((link) => { %>
                    <li><a href="<%= link.link  %>"><%= link.name %> </a></li>
                  <% }) %> 
                </ul>
                
              </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
          </nav>
        </div>
        <hr> <!-- end section -->

        <div class="row">
          <div class="col">
            <!-- Some text here -->
          </div>
        </div>
        <hr>

        <div class="row">
          <div class="col-sm-12">
            <div id="map"></div>
          </div>
        </div>

        <hr>
    <!-- end main row -->
  </div>
  <!-- end main Row -->

  <script>
      let provinces = "<%= JSON.stringify(provinces) %>".split('&#34;').filter(item => item !== '[' && item !== ']' && item !== ',')
      let provs = "<%= JSON.stringify(provs_coords) %>"

      //console.log(provs + 'xxx')
      $.ajaxSetup({ async: false });
      // Initialize and add the map
      function initMap() {
        //const API_KEY = 'AIzaSyAUYDtv51kgaUx_wEw3bfWkoSiYrXuKGlA';

        // The location of Argentina
        let argentina = {lat: -32, lng: -64};
        // The map, centered at Argentina
        let map = new google.maps.Map(
            document.getElementById('map'), {zoom: 5, center: argentina});
        
        // The marker, positioned at Argentina
        //let provs_country = [];
        //let provs_coords = [];

        //for (let i = 0; i < provinces.length; i++) {
        //  provs_country.push(provinces[i] + ', Argentina');
        //}

        //for (let i = 0; i < provinces.length; i++) {
        //  let LOCATION = provs_country[i];
        //  url_api = `//https://maps.googleapis.com/maps/api/geocode/json?address=${LOCATION}&key=${API_KEY}`;

        //  let position = $.getJSON(url_api).responseJSON.results[0].geometry.location;
        //  provs_coords.push(position);
        //}

        for(let i=0; i<provs.length; i++) {
          let marker = new google.maps.Marker({position: provs[i], map});
        }
      }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVLrCMa-XmuVYPDsQqGn8Veantsp1w8bc&callback=initMap"></script>
  </script>
</body>
<footer>
    <small>Dengue Counter - Copyright 2021</small>
</footer>
</html>