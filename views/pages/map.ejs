<!DOCTYPE html>
<html>
<%- include('./layout/head') %> 
<body class="container">

  <!-- main Row -->
  <div class="row">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 bar"></div>
        
        <div class="col-sm-12 text-center header">
          <div>
          </div>
          <h1>CASOS DE DENGUE Y ZIKA EN LA REPUBLICA ARGENTINA</h1>
          <p><h4>Datos obtenidos del Ministerio de Salud y Desarrollo Social. Secretaría de Promoción de la Salud, Prevención y Control de Riesgos. Subsecretaría de Prevención y Control de Enfermedades Comunicables e Inmunoprevenibles. Dirección Nacional de Epidemiología y Análisis de la Situación de Salud. Área de Vigilancia.</h4></p>
          <hr>
          <div>
            <img src="./img/cruz.png" alt="cruz" class="cruz">
          </div>
        </div>

        <div class="col-sm-12 bar">
          <nav class="navbar navbar-inverse">
            <div class="container-fluid">
              <!-- Brand and toggle get grouped for better mobile display -->
              <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href=""></a>
              </div>
          
              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                  <% navigation.map((link) => { %>
                    <li><a href="<%= link.link  %>"><%= link.name %> </a></li>
                  <% }) %> 
                </ul>
                
              </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
          </nav>
        </div>
        <hr> <!-- end section -->

        <div class="row">
          <div class="col">
            <!-- Some text here -->
          </div>
        </div>
        <hr>

        <div class="row">
          <div class="col-sm-12">
            <div id="map"></div>
          </div>
        </div>

        <hr>
    <!-- end main row -->
  </div>
  <!-- end main Row -->

  <script>
      let provinces = "<%= JSON.stringify(provinces) %>".split('&#34;').filter(item => item !== '[' && item !== ']' && item !== ',')
      let provs = "<%= JSON.stringify(provs_coords) %>"

      //console.log(provs + 'xxx')
      $.ajaxSetup({ async: false });
      // Initialize and add the map
      function initMap() {
        //const API_KEY = 'AIzaSyAUYDtv51kgaUx_wEw3bfWkoSiYrXuKGlA';

        // The location of Argentina
        let argentina = {lat: -32, lng: -64};
        // The map, centered at Argentina
        let map = new google.maps.Map(
            document.getElementById('map'), {zoom: 5, center: argentina});
        
        // The marker, positioned at Argentina
        //let provs_country = [];
        //let provs_coords = [];

        //for (let i = 0; i < provinces.length; i++) {
        //  provs_country.push(provinces[i] + ', Argentina');
        //}

        //for (let i = 0; i < provinces.length; i++) {
        //  let LOCATION = provs_country[i];
        //  url_api = `//https://maps.googleapis.com/maps/api/geocode/json?address=${LOCATION}&key=${API_KEY}`;

        //  let position = $.getJSON(url_api).responseJSON.results[0].geometry.location;
        //  provs_coords.push(position);
        //}

        for(let i=0; i<provs.length; i++) {
          let marker = new google.maps.Marker({position: provs[i], map});
        }
      }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVLrCMa-XmuVYPDsQqGn8Veantsp1w8bc&callback=initMap"></script>
  </script>
</body>

<%- include('./layout/footer')  %> 

</html>